webpackJsonp([1],{116:function(e,t,n){var a,i;a=n(117),i=n(118),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options:e.exports).template=i)},117:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t["default"]={data:function(){return{placeSearch:null,mapObj:null,geolocation:null,keyword:null,coordinates:{lng:null,lat:null},noresult:!1,markers:[],walking:null,slist:[]}},ready:function(){this.getLocation()},methods:{initService:function(){var e=this;console.log(111),AMap.service("AMap.PlaceSearch",function(){e.placeSearch=new AMap.PlaceSearch({type:"餐饮服务"}),e.searchKeyWord()})},getLocation:function(){var e=this,t=this;this.mapObj=new AMap.Map("mapDiv"),this.mapObj.plugin("AMap.Geolocation",function(){e.geolocation=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"}),e.mapObj.addControl(e.geolocation),e.geolocation.getCurrentPosition(),AMap.event.addListener(e.geolocation,"complete",e.onComplete),AMap.event.addListener(e.geolocation,"error",e.onError)}),this.walking=new AMap.Walking({map:t.mapObj})},onComplete:function(e){this.coordinates.lng=e.position.getLng(),this.coordinates.lat=e.position.getLat(),this.initService()},onError:function(){console.log("err")},searchKeyWord:function(){var e=this;this.slist=[],this.noresult=!1,this.placeSearch.searchNearBy("",[this.coordinates.lng,this.coordinates.lat],5e4,function(t,n){console.log(n),"complete"===t&&"OK"===n.info?e.slist=n.poiList.pois:e.noresult=!0})},onEnter:function(){this.placeSearch=new AMap.PlaceSearch({type:this.keyword}),this.searchKeyWord()},showMap:function(){document.getElementById("mapList").className="page-hide",document.getElementById("mapPage").className="page page-enter",this.setMarker()},hideMap:function(){document.getElementById("mapList").className="",document.getElementById("mapPage").className="page page-leave",this.removeMarker()},removeMarker:function(){this.mapObj.remove(this.markers)},setMarker:function(){var e=this.slist;this.setDetail(e)},showDetail:function(e){document.getElementById("mapList").className="page-hide",document.getElementById("mapPage").className="page page-enter";var t=this;this.walking.clear(),this.walking.search([t.coordinates.lng,t.coordinates.lat],[e.location.lng,e.location.lat])},setDetail:function(e){for(var t=0;t<e.length;t+=1){var n={map:this.mapObj,icon:"http://webapi.amap.com/images/"+(t+1)+".png",position:new AMap.LngLat(e[t].location.lng,e[t].location.lat),topWhenMouseOver:!0},a=new AMap.Marker(n);this.markers.push(a)}this.mapObj.setCenter(e[0].location)}}}},118:function(e,t){e.exports='\r\n  <div class="scroll-hide">\r\n    <header>\r\n      列表\r\n      <div class="right" @click="showMap">地图</div>\r\n    </header>\r\n    <div class="searchBox">\r\n      <input type="search" class="search" placeholder="搜索关键词" v-model="keyword" @keyup.13="onEnter"/>\r\n      <p class="tips" v-show="slist.length">已为您筛选了最近的<span class="red">10</span>条数据</p>\r\n    </div>\r\n    <div class="map"  id="mapList">\r\n        <ul class="list">\r\n          <template v-for="item in slist">\r\n            <li @click="showDetail(item)">\r\n              <div class="name">\r\n                  <div class="eight text">\r\n                    {{item.name}}\r\n                  </div>\r\n                  <span class="distance">{{item.distance}}米</span>\r\n              </div>\r\n              <div class="type">\r\n                  <div class="half text">\r\n                    {{item.type}}\r\n                  </div>\r\n                  <span class="distance">{{item.address}}</span>\r\n              </div>\r\n            </li>\r\n          </template>\r\n          <div class="gv_loading" v-show="!slist.length && !noresult">\r\n            <div class="ball-clip-rotate"><span></span></div><div class="loading_text">加载中...</div>\r\n          </div>\r\n          <div class="noresult red" v-show="noresult">\r\n              附件没有与相关的内容，换个关键词试试\r\n          </div>\r\n        </ul>\r\n    </div>\r\n    <div class="page" id="mapPage">\r\n        <header>\r\n          <div class="left" @click="hideMap"></div>\r\n          地图\r\n        </header>\r\n        <div id="mapDiv"  style="margin-bottom:0">\r\n\r\n\r\n        </div>\r\n        <div id="panel"></div>\r\n    </div>\r\n  </div>\r\n    <router-view></router-view>\r\n'}});